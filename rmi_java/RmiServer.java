import java.rmi.registry.LocateRegistry; import java.rmi.registry.Registry; import java.rmi.server.UnicastRemoteObject; import java.rmi.RemoteException; public class RmiServer implements RemoteService { public RmiServer() {} public String analyzeDiagnostic(VehicleInfo v) throws RemoteException { System.out.println("Requete recue pour : " + v.toString()); if(v.mileage >= 120000) return "URGENT sur " + v.model + " : Courroie de distribution a changer ! (Km eleve)"; if(v.year < 2010) return "ATTENTION sur " + v.model + " : Vehicule ancien, verifier pollution et rouille."; return "RAS sur " + v.model + " : Vehicule en bon etat."; } public static void main(String[] args) { try { RmiServer obj = new RmiServer(); RemoteService stub = (RemoteService) UnicastRemoteObject.exportObject(obj, 0); Registry registry = LocateRegistry.createRegistry(1099); registry.rebind("AutoTrackService", stub); System.out.println("RMI Server ready."); } catch (Exception e) { e.printStackTrace(); } } }
