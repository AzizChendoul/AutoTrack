import org.omg.CORBA.*; import org.omg.PortableServer.*; import org.omg.CosNaming.*; import AutoTrack.*; public class CorbaServer extends MileageProviderPOA { public String getMileage() { return "54200"; } public static void main(String[] args) { try { ORB orb = ORB.init(args, null); POA rootpoa = POAHelper.narrow(orb.resolve_initial_references("RootPOA")); rootpoa.the_POAManager().activate(); CorbaServer servant = new CorbaServer(); org.omg.CORBA.Object ref = rootpoa.servant_to_reference(servant); MileageProvider href = MileageProviderHelper.narrow(ref); org.omg.CORBA.Object objRef = orb.resolve_initial_references("NameService"); NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef); NameComponent path[] = ncRef.to_name("MileageProvider"); ncRef.rebind(path, href); System.out.println("CORBA server ready."); orb.run(); } catch(Exception e) { e.printStackTrace(); } } }
